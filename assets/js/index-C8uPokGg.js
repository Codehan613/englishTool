import{r as f,j as e}from"./react-In5IJgbb.js";import{g as N}from"./vocabDB-KAyiwwoF.js";import{t as k,c as b,a as _,b as S,d as h,e as C,f as p,g as V,h as T}from"./@heroui-KUMCxdIM.js";import{f as q,$ as z}from"./index--aS2BkZt.js";import{u as E,a as P}from"./react-router-BN178J2n.js";import"./color-CqkleIqs.js";import"./@react-aria-geqKVkVn.js";import"./react-dom-CeiFjhki.js";import"./scheduler-BNqrtbQi.js";import"./@swc-DS7M6wx8.js";import"./@react-stately-DHSAFnjb.js";import"./use-sync-external-store-DY2DQmcl.js";import"./clsx-B-dksMZM.js";import"./@internationalized-BB0Nk989.js";import"./framer-motion-DpPIo1MS.js";import"./motion-utils-Bq7ogXa8.js";import"./motion-dom-D7qXdN4u.js";import"./react-textarea-autosize-8HH-bjWN.js";import"./@babel-Cv5OCJ0e.js";import"./use-latest-BzJiZZRT.js";import"./use-isomorphic-layout-effect-BtrcQsE6.js";import"./use-composed-ref-s73OZiyX.js";import"./tailwind-variants-DMhsZxQ3.js";import"./tailwind-merge-BNYwEHuQ.js";import"./zustand-QmAjsc7j.js";import"./lodash-es-C0dmWdvm.js";import"./cookie--_YQFYBD.js";function L({sentence:n,onValueChange:m,wordItem:i}){const[t,c]=f.useState(n.value),x=d=>{c(d);let u={key:n.key,value:d};m(u,i)};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"flex gap-2 items-center mb-2 w-full",children:[e.jsx("div",{children:n.key}),e.jsx(k,{minRows:1,className:"w-full",classNames:{input:"text-lg"},"aria-label":"text",value:t,onValueChange:x,placeholder:"输入造的句子"})]})})}function B(n){return e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"2em",height:"2em",...n,children:e.jsxs("g",{fill:"none",children:[e.jsx("path",{d:"M24 0v24H0V0zM12.593 23.258l-.011.002l-.071.035l-.02.004l-.014-.004l-.071-.035q-.016-.005-.024.005l-.004.01l-.017.428l.005.02l.01.013l.104.074l.015.004l.012-.004l.104-.074l.012-.016l.004-.017l-.017-.427q-.004-.016-.017-.018m.265-.113l-.013.002l-.185.093l-.01.01l-.003.011l.018.43l.005.012l.008.007l.201.093q.019.005.029-.008l.004-.014l-.034-.614q-.005-.019-.02-.022m-.715.002a.02.02 0 0 0-.027.006l-.006.014l-.034.614q.001.018.017.024l.015-.002l.201-.093l.01-.008l.004-.011l.017-.43l-.003-.012l-.01-.01z"}),e.jsx("path",{fill:"currentColor",d:"M7.16 10.972A7 7 0 0 1 19.5 15.5a1.5 1.5 0 1 0 3 0c0-5.523-4.477-10-10-10a9.97 9.97 0 0 0-7.418 3.295L4.735 6.83a1.5 1.5 0 1 0-2.954.52l1.042 5.91c.069.391.29.74.617.968c.403.282.934.345 1.385.202l5.644-.996a1.5 1.5 0 1 0-.52-2.954l-2.788.491Z"})]})})}function ie(){const n=E(),[m]=P();let i=m.get("lesson");const[t,c]=f.useState(null),x=async()=>{if(i){const s=await N(i);let r={...s},l=s==null?void 0:s.words.map(a=>({...a,isShow:!1,sentences:[{key:1,value:""}]}));r.words=l,c(r)}else console.log("no lesson")},d=(s,r)=>{const l={...t};let a={...r},v=a.sentences.map(o=>o.key===s.key?{...o,value:s.value}:o),y=l.words.map(o=>o.id===r.id?(a={...o,sentences:v},a):o);c({...t,words:y})},u=async()=>{let s="";t.words.forEach(l=>{let a=q(l);s+=a+`
`}),await z(s)&&T({color:"success",title:"Copied to clipboard"})},j=s=>{const r=[...s.sentences,{key:s.sentences.length+1,value:""}];c({...t,words:t.words.map(l=>l.id===s.id?{...s,sentences:r}:l)})},w=(s,r)=>{const l=s.sentences.filter(a=>a.key!==r);c({...t,words:t.words.map(a=>a.id===s.id?{...s,sentences:l}:a)})};f.useEffect(()=>{x()},[]);const g=()=>{n("/")};return e.jsx("div",{className:"w-full md:flex  md:justify-center ",children:e.jsxs("div",{className:"p-4 box-border w-[100vw] md:w-[50vw] lg:w-[50vw] overflow-x-hidden",children:[e.jsx("div",{onClick:g,children:e.jsx(B,{})}),t&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsxs("div",{className:"text-center text-lg",children:[e.jsx("h1",{className:"text-2xl font-bold",children:t.enTitle}),e.jsx("p",{children:t.zhTitle})]}),t.words.map(s=>{var r;return e.jsxs(b,{className:" mt-2",children:[e.jsxs(_,{className:"flex gap-3 justify-between items-center",children:[e.jsxs("div",{className:"flex flex-col items-start",children:[e.jsx("p",{className:"text-2xl font-bold",children:s.word}),e.jsx("p",{className:"text-lg text-default-500",children:s.phonetic})]}),e.jsx("div",{children:e.jsxs(S,{size:"lg",className:"text-2xl font-bold",children:[s.type," ",s.meaning]})})]}),e.jsx(h,{}),e.jsx(C,{children:(r=s.sentences)==null?void 0:r.map(l=>e.jsxs("div",{className:"flex gap-2 items-center mb-2",children:[e.jsx(L,{sentence:l,wordItem:s,onValueChange:d}),l.key>1&&e.jsx(p,{color:"default",onPress:()=>w(s,l.key),children:"-"})]},l.key))}),e.jsx(h,{}),e.jsx(V,{children:e.jsx(p,{color:"default",onPress:()=>j(s),children:"+"})})]},s.word)})]}),e.jsx("div",{children:e.jsx(p,{size:"lg",className:"w-full",color:"success",onPress:u,children:"复制"})})]})]})})}export{ie as default};
