import{r as s}from"./react-In5IJgbb.js";import{s as k}from"./use-sync-external-store-DY2DQmcl.js";let O=!1;function Y(){return O}function z(t,e,i){let[a,r]=s.useState(t||e),l=s.useRef(t!==void 0),o=t!==void 0;s.useEffect(()=>{l.current,l.current=o},[o]);let d=o?t:a,v=s.useCallback((c,...u)=>{let h=(f,...m)=>{i&&(Object.is(d,f)||i(f,...m)),o||(d=f)};typeof c=="function"?r((m,...$)=>{let b=c(o?d:m,...$);return h(b,...u),o?m:b}):(o||r(c),h(c,...u))},[o,d,i]);return[d,v]}const M={badInput:!1,customError:!1,patternMismatch:!1,rangeOverflow:!1,rangeUnderflow:!1,stepMismatch:!1,tooLong:!1,tooShort:!1,typeMismatch:!1,valueMissing:!1,valid:!0},C={...M,customError:!0,valid:!1},p={isInvalid:!1,validationDetails:M,validationErrors:[]},R=s.createContext({}),A="__formValidationState"+Date.now();function G(t){if(t[A]){let{realtimeValidation:e,displayValidation:i,updateValidation:a,resetValidation:r,commitValidation:l}=t[A];return{realtimeValidation:e,displayValidation:i,updateValidation:a,resetValidation:r,commitValidation:l}}return W(t)}function W(t){let{isInvalid:e,validationState:i,name:a,value:r,builtinValidation:l,validate:o,validationBehavior:d="aria"}=t;i&&(e||(e=i==="invalid"));let v=e!==void 0?{isInvalid:e,validationErrors:[],validationDetails:C}:null,c=s.useMemo(()=>{if(!o||r==null)return null;let n=F(o,r);return w(n)},[o,r]);l!=null&&l.validationDetails.valid&&(l=void 0);let u=s.useContext(R),h=s.useMemo(()=>a?Array.isArray(a)?a.flatMap(n=>I(u[n])):I(u[a]):[],[u,a]),[f,m]=s.useState(u),[$,b]=s.useState(!1);u!==f&&(m(u),b(!1));let E=s.useMemo(()=>w($?[]:h),[$,h]),g=s.useRef(p),[T,y]=s.useState(p),V=s.useRef(p),D=()=>{if(!U)return;S(!1);let n=c||l||g.current;x(n,V.current)||(V.current=n,y(n))},[U,S]=s.useState(!1);return s.useEffect(D),{realtimeValidation:v||E||c||l||p,displayValidation:d==="native"?v||E||T:v||E||c||l||T,updateValidation(n){d==="aria"&&!x(T,n)?y(n):g.current=n},resetValidation(){let n=p;x(n,V.current)||(V.current=n,y(n)),d==="native"&&S(!1),b(!0)},commitValidation(){d==="native"&&S(!0),b(!0)}}}function I(t){return t?Array.isArray(t)?t:[t]:[]}function F(t,e){if(typeof t=="function"){let i=t(e);if(i&&typeof i!="boolean")return I(i)}return[]}function w(t){return t.length?{isInvalid:!0,validationErrors:t,validationDetails:C}:null}function x(t,e){return t===e?!0:!!t&&!!e&&t.isInvalid===e.isInvalid&&t.validationErrors.length===e.validationErrors.length&&t.validationErrors.every((i,a)=>i===e.validationErrors[a])&&Object.entries(t.validationDetails).every(([i,a])=>e.validationDetails[i]===a)}function H(t){let e=s.useCallback(r=>t.subscribe(r),[t]),i=s.useCallback(()=>t.visibleToasts,[t]);return{visibleToasts:k.useSyncExternalStore(e,i,i),add:(r,l)=>t.add(r,l),close:r=>t.close(r),pauseAll:()=>t.pauseAll(),resumeAll:()=>t.resumeAll()}}class J{runWithWrapUpdate(e,i){this.wrapUpdate?this.wrapUpdate(e,i):e()}subscribe(e){return this.subscriptions.add(e),()=>this.subscriptions.delete(e)}add(e,i={}){let a="_"+Math.random().toString(36).slice(2),r={...i,content:e,key:a,timer:i.timeout?new L(()=>this.close(a),i.timeout):void 0};return this.queue.unshift(r),this.updateVisibleToasts("add"),a}close(e){let i=this.queue.findIndex(l=>l.key===e);if(i>=0){var a,r;(a=(r=this.queue[i]).onClose)===null||a===void 0||a.call(r),this.queue.splice(i,1)}this.updateVisibleToasts("remove")}updateVisibleToasts(e){this.visibleToasts=this.queue.slice(0,this.maxVisibleToasts),this.runWithWrapUpdate(()=>{for(let i of this.subscriptions)i()},e)}pauseAll(){for(let e of this.visibleToasts)e.timer&&e.timer.pause()}resumeAll(){for(let e of this.visibleToasts)e.timer&&e.timer.resume()}clear(){this.queue=[],this.updateVisibleToasts("clear")}constructor(e){this.queue=[],this.subscriptions=new Set,this.visibleToasts=[];var i;this.maxVisibleToasts=(i=e==null?void 0:e.maxVisibleToasts)!==null&&i!==void 0?i:1/0,this.wrapUpdate=e==null?void 0:e.wrapUpdate}}class L{reset(e){this.remaining=e,this.resume()}pause(){this.timerId!=null&&(clearTimeout(this.timerId),this.timerId=null,this.remaining-=Date.now()-this.startTime)}resume(){this.remaining<=0||(this.startTime=Date.now(),this.timerId=setTimeout(()=>{this.timerId=null,this.remaining=0,this.callback()},this.remaining))}constructor(e,i){this.startTime=null,this.remaining=i,this.callback=e}}export{R as $,z as a,H as b,J as c,Y as d,G as e};
